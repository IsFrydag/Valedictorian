<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Management - IntelliChat AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .gradient-text { background: linear-gradient(135deg, #0d9488, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .file-card { transition: all 0.3s ease; }
        .file-card:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
        .glass { backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-teal-500 to-amber-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">AI</span>
                    </div>
                    <span class="font-semibold text-slate-800">IntelliChat</span>
                </div>
                <div class="flex space-x-6">
                    <a href="index.html" class="text-slate-600 hover:text-teal-600 transition-colors">Chat</a>
                    <a href="files.html" class="text-teal-600 font-medium">Files</a>
                    <a href="settings.html" class="text-slate-600 hover:text-teal-600 transition-colors">Settings</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="pt-20 pb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold mb-4">
                    <span class="gradient-text">File Management</span>
                </h1>
                <p class="text-xl text-slate-600 max-w-3xl mx-auto">
                    Manage your uploaded documents, view processing status, and organize your knowledge base.
                </p>
            </div>
        </div>
    </section>

    <!-- File Upload Section -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-6 text-slate-800">Upload New Files</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Upload Zone -->
                <div>
                    <div id="drop-zone" class="border-2 border-dashed border-slate-300 rounded-lg p-8 text-center hover:border-teal-400 transition-colors cursor-pointer mb-4">
                        <div class="text-slate-500 mb-4">
                            <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                        </div>
                        <h3 class="text-lg font-medium text-slate-700 mb-2">Drop files here</h3>
                        <p class="text-slate-600 mb-2">or click to browse</p>
                        <p class="text-sm text-slate-500">Supports PDF, DOCX, TXT, CSV, JSON files up to 10MB each</p>
                    </div>
                    
                    <!-- Upload Progress -->
                    <div id="upload-progress" class="hidden">
                        <div class="bg-slate-100 rounded-lg p-4">
                            <div class="flex justify-between text-sm text-slate-600 mb-2">
                                <span id="upload-filename">Processing...</span>
                                <span id="upload-percent">0%</span>
                            </div>
                            <div class="w-full bg-slate-200 rounded-full h-3">
                                <div id="upload-bar" class="bg-gradient-to-r from-teal-500 to-amber-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upload Options -->
                <div>
                    <h3 class="text-lg font-medium text-slate-700 mb-4">Upload Options</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Auto-process files</span>
                                <p class="text-xs text-slate-500">Automatically extract content and build knowledge base</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="auto-process" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Extract metadata</span>
                                <p class="text-xs text-slate-500">Extract file metadata and document properties</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="extract-metadata" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                            </label>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Create thumbnails</span>
                                <p class="text-xs text-slate-500">Generate document preview thumbnails</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="create-thumbnails" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- File Library -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
        <div class="bg-white rounded-xl shadow-lg p-6">
            <!-- File Library Header -->
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0">
                <div>
                    <h2 class="text-2xl font-semibold text-slate-800">Document Library</h2>
                    <p class="text-slate-600 mt-1">Manage your uploaded files and knowledge base</p>
                </div>
                
                <div class="flex space-x-3">
                    <!-- Search -->
                    <div class="relative">
                        <input type="text" id="file-search" placeholder="Search files..." 
                               class="pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <svg class="absolute left-3 top-2.5 h-5 w-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    
                    <!-- Filter -->
                    <select id="file-filter" class="px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <option value="all">All Files</option>
                        <option value="pdf">PDF</option>
                        <option value="docx">Word</option>
                        <option value="txt">Text</option>
                        <option value="csv">CSV</option>
                        <option value="json">JSON</option>
                    </select>
                    
                    <!-- Sort -->
                    <select id="file-sort" class="px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                        <option value="date">Newest First</option>
                        <option value="name">Name A-Z</option>
                        <option value="size">Size</option>
                        <option value="type">Type</option>
                    </select>
                </div>
            </div>

            <!-- File Grid -->
            <div id="file-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Files will be populated by JavaScript -->
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden text-center py-12">
                <div class="text-slate-400 mb-4">
                    <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                </div>
                <h3 class="text-lg font-medium text-slate-700 mb-2">No files uploaded yet</h3>
                <p class="text-slate-500 mb-4">Upload your first document to start building your knowledge base</p>
                <button onclick="document.getElementById('drop-zone').click()" class="px-6 py-2 bg-gradient-to-r from-teal-500 to-amber-500 text-white rounded-lg hover:from-teal-600 hover:to-amber-600 transition-all duration-200 font-medium">
                    Upload Files
                </button>
            </div>

            <!-- Load More -->
            <div class="text-center mt-8">
                <button id="load-more" class="px-6 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors font-medium">
                    Load More Files
                </button>
            </div>
        </div>
    </section>

    <!-- File Details Modal -->
    <div id="file-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h3 class="text-xl font-semibold text-slate-800">File Details</h3>
                    <button id="close-modal" class="text-slate-400 hover:text-slate-600">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="modal-content">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- File Input (Hidden) -->
    <input type="file" id="file-input" multiple accept=".pdf,.docx,.txt,.csv,.json" class="hidden">

    <script>
        // File Management System
        class FileManager {
            constructor() {
                this.files = JSON.parse(localStorage.getItem('uploadedFiles') || '[]');
                this.filteredFiles = [...this.files];
                this.currentPage = 1;
                this.filesPerPage = 12;
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.renderFiles();
                this.updateEmptyState();
            }

            setupEventListeners() {
                // File upload
                const dropZone = document.getElementById('drop-zone');
                const fileInput = document.getElementById('file-input');
                
                dropZone.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', (e) => this.handleFileSelect(e.target.files));
                
                // Drag and drop
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('border-teal-400', 'bg-teal-50');
                });
                
                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('border-teal-400', 'bg-teal-50');
                });
                
                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('border-teal-400', 'bg-teal-50');
                    this.handleFileSelect(e.dataTransfer.files);
                });

                // Search and filter
                document.getElementById('file-search').addEventListener('input', (e) => this.handleSearch(e.target.value));
                document.getElementById('file-filter').addEventListener('change', (e) => this.handleFilter(e.target.value));
                document.getElementById('file-sort').addEventListener('change', (e) => this.handleSort(e.target.value));

                // Modal
                document.getElementById('close-modal').addEventListener('click', () => this.closeModal());
                document.getElementById('file-modal').addEventListener('click', (e) => {
                    if (e.target.id === 'file-modal') this.closeModal();
                });

                // Load more
                document.getElementById('load-more').addEventListener('click', () => this.loadMore());
            }

            handleFileSelect(files) {
                const fileArray = Array.from(files);
                const validFiles = fileArray.filter(file => this.isValidFileType(file));
                
                if (validFiles.length === 0) {
                    this.showNotification('Please select valid file types (PDF, DOCX, TXT, CSV, JSON)', 'error');
                    return;
                }

                this.processFiles(validFiles);
            }

            isValidFileType(file) {
                const validTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 
                                   'text/plain', 'text/csv', 'application/json'];
                const validExtensions = ['.pdf', '.docx', '.txt', '.csv', '.json'];
                
                return validTypes.includes(file.type) || 
                       validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));
            }

            async processFiles(files) {
                const progressContainer = document.getElementById('upload-progress');
                const progressBar = document.getElementById('upload-bar');
                const progressPercent = document.getElementById('upload-percent');
                const progressFilename = document.getElementById('upload-filename');
                
                progressContainer.classList.remove('hidden');
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const progress = ((i + 1) / files.length) * 100;
                    
                    progressBar.style.width = `${progress}%`;
                    progressPercent.textContent = `${Math.round(progress)}%`;
                    progressFilename.textContent = `Processing ${file.name}...`;
                    
                    // Simulate processing time
                    await this.simulateProcessing(file);
                    
                    // Add file to storage
                    const fileData = {
                        id: Date.now() + i,
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        uploadDate: new Date().toISOString(),
                        content: await this.extractFileContent(file),
                        processed: true
                    };
                    
                    this.files.push(fileData);
                }
                
                // Save to localStorage
                localStorage.setItem('uploadedFiles', JSON.stringify(this.files));
                
                // Update UI
                this.filteredFiles = [...this.files];
                this.renderFiles();
                this.updateEmptyState();
                
                // Hide progress
                setTimeout(() => {
                    progressContainer.classList.add('hidden');
                    this.showNotification(`Processed ${files.length} file(s) successfully!`, 'success');
                }, 500);
            }

            async simulateProcessing(file) {
                const processingTime = Math.min(Math.max(file.size / 10000, 1000), 5000);
                return new Promise(resolve => setTimeout(resolve, processingTime));
            }

            async extractFileContent(file) {
                const fileName = file.name.toLowerCase();
                
                if (fileName.endsWith('.txt')) {
                    return `Sample text content from ${file.name}. This document contains important information that the AI will learn from.`;
                } else if (fileName.endsWith('.pdf')) {
                    return `PDF document: ${file.name}. This PDF contains structured information with multiple sections that will be processed by the AI.`;
                } else if (fileName.endsWith('.docx')) {
                    return `Word document: ${file.name}. This document contains formatted text and structured content for AI analysis.`;
                } else if (fileName.endsWith('.csv')) {
                    return `CSV data file: ${file.name}. This spreadsheet contains tabular data with multiple rows and columns for analysis.`;
                } else if (fileName.endsWith('.json')) {
                    return `JSON data file: ${file.name}. This structured data file contains key-value pairs and nested objects for AI processing.`;
                }
                
                return `File: ${file.name}. Content extracted and processed for AI learning.`;
            }

            handleSearch(query) {
                this.filteredFiles = this.files.filter(file => 
                    file.name.toLowerCase().includes(query.toLowerCase()) ||
                    file.content.toLowerCase().includes(query.toLowerCase())
                );
                this.currentPage = 1;
                this.renderFiles();
            }

            handleFilter(filter) {
                if (filter === 'all') {
                    this.filteredFiles = [...this.files];
                } else {
                    this.filteredFiles = this.files.filter(file => 
                        file.name.toLowerCase().endsWith(`.${filter}`)
                    );
                }
                this.currentPage = 1;
                this.renderFiles();
            }

            handleSort(sortBy) {
                switch (sortBy) {
                    case 'name':
                        this.filteredFiles.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'size':
                        this.filteredFiles.sort((a, b) => b.size - a.size);
                        break;
                    case 'type':
                        this.filteredFiles.sort((a, b) => a.type.localeCompare(b.type));
                        break;
                    case 'date':
                    default:
                        this.filteredFiles.sort((a, b) => new Date(b.uploadDate) - new Date(a.uploadDate));
                        break;
                }
                this.renderFiles();
            }

            renderFiles() {
                const grid = document.getElementById('file-grid');
                const startIndex = (this.currentPage - 1) * this.filesPerPage;
                const endIndex = startIndex + this.filesPerPage;
                const filesToShow = this.filteredFiles.slice(0, endIndex);
                
                if (filesToShow.length === 0) {
                    grid.innerHTML = '';
                    return;
                }
                
                grid.innerHTML = filesToShow.map(file => this.createFileCard(file)).join('');
                
                // Add event listeners to file cards
                filesToShow.forEach(file => {
                    const card = document.querySelector(`[data-file-id="${file.id}"]`);
                    card.addEventListener('click', () => this.showFileDetails(file));
                });
                
                // Show/hide load more button
                const loadMoreBtn = document.getElementById('load-more');
                loadMoreBtn.style.display = endIndex >= this.filteredFiles.length ? 'none' : 'block';
            }

            createFileCard(file) {
                const fileSize = this.formatFileSize(file.size);
                const uploadDate = new Date(file.uploadDate).toLocaleDateString();
                const fileType = this.getFileTypeIcon(file.name);
                
                return `
                    <div class="file-card bg-slate-50 rounded-lg p-4 cursor-pointer border border-slate-200 hover:border-teal-300" data-file-id="${file.id}">
                        <div class="flex items-start justify-between mb-3">
                            <div class="text-2xl">${fileType}</div>
                            <div class="flex space-x-1">
                                <span class="w-2 h-2 bg-green-400 rounded-full"></span>
                                <span class="text-xs text-slate-500">Processed</span>
                            </div>
                        </div>
                        
                        <h3 class="font-medium text-slate-800 mb-2 truncate">${file.name}</h3>
                        
                        <div class="space-y-1 text-sm text-slate-600">
                            <div class="flex justify-between">
                                <span>Size:</span>
                                <span>${fileSize}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Uploaded:</span>
                                <span>${uploadDate}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Type:</span>
                                <span>${file.type || 'Unknown'}</span>
                            </div>
                        </div>
                        
                        <div class="mt-3 pt-3 border-t border-slate-200">
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-slate-500">Knowledge Nodes</span>
                                <span class="text-xs font-medium text-teal-600">${Math.floor(Math.random() * 10) + 1}</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            getFileTypeIcon(fileName) {
                const ext = fileName.split('.').pop().toLowerCase();
                const icons = {
                    'pdf': 'üìÑ',
                    'docx': 'üìù',
                    'txt': 'üìÑ',
                    'csv': 'üìä',
                    'json': 'üíæ'
                };
                return icons[ext] || 'üìÑ';
            }

            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            showFileDetails(file) {
                const modal = document.getElementById('file-modal');
                const content = document.getElementById('modal-content');
                
                content.innerHTML = `
                    <div class="space-y-6">
                        <!-- File Header -->
                        <div class="flex items-center space-x-4">
                            <div class="text-4xl">${this.getFileTypeIcon(file.name)}</div>
                            <div>
                                <h4 class="text-lg font-semibold text-slate-800">${file.name}</h4>
                                <p class="text-sm text-slate-600">Uploaded ${new Date(file.uploadDate).toLocaleString()}</p>
                            </div>
                        </div>
                        
                        <!-- File Info -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-slate-50 rounded-lg p-4">
                                <h5 class="font-medium text-slate-700 mb-2">File Information</h5>
                                <div class="space-y-1 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Size:</span>
                                        <span class="text-slate-800">${this.formatFileSize(file.size)}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Type:</span>
                                        <span class="text-slate-800">${file.type || 'Unknown'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Status:</span>
                                        <span class="text-green-600 font-medium">‚úì Processed</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-slate-50 rounded-lg p-4">
                                <h5 class="font-medium text-slate-700 mb-2">Processing Stats</h5>
                                <div class="space-y-1 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Knowledge Nodes:</span>
                                        <span class="text-slate-800">${Math.floor(Math.random() * 10) + 1}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Concepts Found:</span>
                                        <span class="text-slate-800">${Math.floor(Math.random() * 20) + 5}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">Processing Time:</span>
                                        <span class="text-slate-800">${Math.floor(Math.random() * 3) + 1}s</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Content Preview -->
                        <div class="bg-slate-50 rounded-lg p-4">
                            <h5 class="font-medium text-slate-700 mb-2">Content Preview</h5>
                            <div class="bg-white rounded-lg p-3 border border-slate-200 max-h-40 overflow-y-auto">
                                <p class="text-sm text-slate-700 leading-relaxed">${file.content.substring(0, 500)}...</p>
                            </div>
                        </div>
                        
                        <!-- Actions -->
                        <div class="flex space-x-3">
                            <button onclick="fileManager.reprocessFile(${file.id})" class="flex-1 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors font-medium">
                                Reprocess File
                            </button>
                            <button onclick="fileManager.deleteFile(${file.id})" class="flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium">
                                Delete File
                            </button>
                        </div>
                    </div>
                `;
                
                modal.classList.remove('hidden');
            }

            closeModal() {
                document.getElementById('file-modal').classList.add('hidden');
            }

            reprocessFile(fileId) {
                this.showNotification('File reprocessing started...', 'info');
                this.closeModal();
                
                // Simulate reprocessing
                setTimeout(() => {
                    this.showNotification('File reprocessed successfully!', 'success');
                }, 2000);
            }

            deleteFile(fileId) {
                if (confirm('Are you sure you want to delete this file?')) {
                    this.files = this.files.filter(file => file.id !== fileId);
                    this.filteredFiles = this.filteredFiles.filter(file => file.id !== fileId);
                    
                    localStorage.setItem('uploadedFiles', JSON.stringify(this.files));
                    
                    this.renderFiles();
                    this.updateEmptyState();
                    this.closeModal();
                    
                    this.showNotification('File deleted successfully!', 'success');
                }
            }

            loadMore() {
                this.currentPage++;
                this.renderFiles();
            }

            updateEmptyState() {
                const emptyState = document.getElementById('empty-state');
                const loadMoreBtn = document.getElementById('load-more');
                
                if (this.files.length === 0) {
                    emptyState.classList.remove('hidden');
                    loadMoreBtn.style.display = 'none';
                } else {
                    emptyState.classList.add('hidden');
                }
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-20 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;
                
                const colors = {
                    success: 'bg-green-500 text-white',
                    error: 'bg-red-500 text-white',
                    warning: 'bg-yellow-500 text-white',
                    info: 'bg-blue-500 text-white'
                };
                
                notification.className += ` ${colors[type]}`;
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
        }

        // Initialize file manager
        let fileManager;
        document.addEventListener('DOMContentLoaded', () => {
            fileManager = new FileManager();
        });
    </script>
</body>
</html>